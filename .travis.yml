language: C
dist: trusty
sudo: required
notifications:
  email: false

before_install:
- sudo apt-get install ansible linux-headers-$(uname -r)
- mkdir vm-debian-netvirt
- cd vm-debian-netvirt
- wget http://download.virtualbox.org/virtualbox/5.2.10/virtualbox-5.2_5.2.10-122088~Ubuntu~trusty_amd64.deb
- wget https://releases.hashicorp.com/vagrant/2.1.0/vagrant_2.1.0_x86_64.deb
- sudo dpkg -i virtualbox-5.2_5.2.10-122088~Ubuntu~trusty_amd64.deb
- sudo /etc/init.d/vboxdrv setup
- sudo dpkg -i vagrant_2.1.0_x86_64.deb
- wget https://raw.githubusercontent.com/netvirt/netvirt/master/build_farm/netvirt.yml

script:
- 'pwd'
- 'vagrant init vogtmann/debian-7.5-32'
- 'curl -O http://5806.orgw.net/github/Vagrantfile'
- 'vagrant up'
- 'ansible-playbook -i 127.0.0.1:2222, --private-key ~/.vagrant.d/insecure_private_key -u vagrant -v ./netvirt.yml'
